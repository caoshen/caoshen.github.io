<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>caoshen | caoshen</title><meta name="author" content="caoshen"><meta name="copyright" content="caoshen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="RxJava 操作符介绍RxJava 操作符的类型可以分为：  创建操作符 变换操作符 过滤操作符 组合操作符 错误处理操作符 辅助操作符 条件布尔操作符 算术聚合操作符 连接操作符  这些操作符类型下面由很多操作符，每个操作符可能还有很多变体。 创建操作符创建操作符有 create、just、fromArray，以及 defer、range、interval、start、repeat 和 tim">
<meta property="og:type" content="article">
<meta property="og:title" content="caoshen">
<meta property="og:url" content="https://www.okclouder.cn/2020/11/26/RxJava%20%E6%93%8D%E4%BD%9C%E7%AC%A6%E4%BB%8B%E7%BB%8D/index.html">
<meta property="og:site_name" content="caoshen">
<meta property="og:description" content="RxJava 操作符介绍RxJava 操作符的类型可以分为：  创建操作符 变换操作符 过滤操作符 组合操作符 错误处理操作符 辅助操作符 条件布尔操作符 算术聚合操作符 连接操作符  这些操作符类型下面由很多操作符，每个操作符可能还有很多变体。 创建操作符创建操作符有 create、just、fromArray，以及 defer、range、interval、start、repeat 和 tim">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic1.zhimg.com/80/v2-53cf7b4f3782749070a4207dd4d4888b_1440w.jpeg">
<meta property="article:published_time" content="2020-11-26T13:13:31.910Z">
<meta property="article:modified_time" content="2020-11-26T13:14:39.436Z">
<meta property="article:author" content="caoshen">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic1.zhimg.com/80/v2-53cf7b4f3782749070a4207dd4d4888b_1440w.jpeg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.okclouder.cn/2020/11/26/RxJava%20%E6%93%8D%E4%BD%9C%E7%AC%A6%E4%BB%8B%E7%BB%8D/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-11-26 21:14:39'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="caoshen" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/3806787?s=460&amp;u=ee280a9fc6c98bc591f30ffbf10360a9ac3822ff&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">151</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://pic1.zhimg.com/80/v2-53cf7b4f3782749070a4207dd4d4888b_1440w.jpeg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">caoshen</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><h1 class="post-title">无题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-11-26T13:13:31.910Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-11-26T13:14:39.436Z" title="更新于 2020-11-26 21:14:39">2020-11-26</time></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="RxJava-操作符介绍"><a href="#RxJava-操作符介绍" class="headerlink" title="RxJava 操作符介绍"></a>RxJava 操作符介绍</h1><p>RxJava 操作符的类型可以分为：</p>
<ol>
<li>创建操作符</li>
<li>变换操作符</li>
<li>过滤操作符</li>
<li>组合操作符</li>
<li>错误处理操作符</li>
<li>辅助操作符</li>
<li>条件布尔操作符</li>
<li>算术聚合操作符</li>
<li>连接操作符</li>
</ol>
<p>这些操作符类型下面由很多操作符，每个操作符可能还有很多变体。</p>
<h2 id="创建操作符"><a href="#创建操作符" class="headerlink" title="创建操作符"></a>创建操作符</h2><p>创建操作符有 create、just、fromArray，以及 defer、range、interval、start、repeat 和 timer 等。</p>
<h3 id="create"><a href="#create" class="headerlink" title="create"></a>create</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;String&gt; observable1 = Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;String&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        emitter.onNext(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">        emitter.onNext(<span class="string">&quot;def&quot;</span>);</span><br><span class="line">        emitter.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="just"><a href="#just" class="headerlink" title="just"></a>just</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;String&gt; observable = Observable.just(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;def&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="fromArray"><a href="#fromArray" class="headerlink" title="fromArray"></a>fromArray</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String[] words = &#123;<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;def&quot;</span>&#125;;</span><br><span class="line">Observable&lt;String&gt; observable2 = Observable.fromArray(words);</span><br></pre></td></tr></table></figure>

<h3 id="interval"><a href="#interval" class="headerlink" title="interval"></a>interval</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doInterval</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Disposable subscribe = Observable.interval(<span class="number">3</span>, TimeUnit.SECONDS)</span><br><span class="line">            .subscribe(<span class="keyword">new</span> Consumer&lt;Long&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Long aLong)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                    Log.d(TAG, <span class="string">&quot;accept:&quot;</span> + aLong);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>每隔 3 秒会调用 accept 方法。</p>
<h3 id="range"><a href="#range" class="headerlink" title="range"></a>range</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doRange</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Disposable subscribe = Observable.range(<span class="number">0</span>, <span class="number">5</span>)</span><br><span class="line">            .subscribe(<span class="keyword">new</span> Consumer&lt;Integer&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Integer integer)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                    Log.d(TAG, <span class="string">&quot;accept:&quot;</span> + integer);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从 0 开始调用 call 5 次。start = 0, count = 5。</p>
<h3 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doRepeat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Disposable subscribe = Observable.range(<span class="number">0</span>, <span class="number">5</span>)</span><br><span class="line">            .repeat(<span class="number">2</span>)</span><br><span class="line">            .subscribe(<span class="keyword">new</span> Consumer&lt;Integer&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Integer integer)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                    Log.d(TAG, <span class="string">&quot;accept:&quot;</span> + integer);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从 0 开始调用 call 5 次，总共重复 2 遍。times = 2。</p>
<h2 id="变换操作符"><a href="#变换操作符" class="headerlink" title="变换操作符"></a>变换操作符</h2><p>变换操作符包括 map、flatMap、concatMap、switchMap、flatMapIterable、buffer、groupBy、cast、window、scan 等。这里介绍其中几种。</p>
<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p>map 操作符可以通过一个 Function 将一个 Observable 转换为另一个 Observable。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String start = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">    Disposable subscribe = Observable.just(<span class="string">&quot;def&quot;</span>).map(<span class="keyword">new</span> Function&lt;String, String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">apply</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> start + s;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).subscribe(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            Log.d(TAG, <span class="string">&quot;accept:&quot;</span> + s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="flatMap-和-cast"><a href="#flatMap-和-cast" class="headerlink" title="flatMap 和 cast"></a>flatMap 和 cast</h3><p>flatMap 可以将 Observable 集合转换成一个单独的 Observable。flatMap 的合并允许交叉，可能会交错的发送事件，最后的顺序可能不是原始 Observable 发送时的顺序。</p>
<p>cast 可以将 Observable 转换为指定类型，比如 String 类型。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doFlatMapAndCast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String start = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">    List&lt;String&gt; strList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    strList.add(<span class="string">&quot;abc123&quot;</span>);</span><br><span class="line">    strList.add(<span class="string">&quot;abc124&quot;</span>);</span><br><span class="line">    strList.add(<span class="string">&quot;abc125&quot;</span>);</span><br><span class="line">    strList.add(<span class="string">&quot;abc126&quot;</span>);</span><br><span class="line">    Disposable subscribe = Observable.fromIterable(strList).flatMap(<span class="keyword">new</span> Function&lt;String, ObservableSource&lt;?&gt;&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> ObservableSource&lt;?&gt; apply(String s) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">            <span class="keyword">return</span> Observable.just(start + s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).cast(String.class).subscribe(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            Log.d(TAG, <span class="string">&quot;doFlatMapAndCast:&quot;</span> + s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="concatMap"><a href="#concatMap" class="headerlink" title="concatMap"></a>concatMap</h3><p>concatMap 操作符和 flatMap 功能类似，不同的是它解决了 flatMap 的交叉问题，能把发射的值连续在一起。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doConcatMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String start = <span class="string">&quot;def-&quot;</span>;</span><br><span class="line">    List&lt;String&gt; strList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    strList.add(<span class="string">&quot;abc123&quot;</span>);</span><br><span class="line">    strList.add(<span class="string">&quot;abc124&quot;</span>);</span><br><span class="line">    strList.add(<span class="string">&quot;abc125&quot;</span>);</span><br><span class="line">    strList.add(<span class="string">&quot;abc126&quot;</span>);</span><br><span class="line">    Disposable subscribe = Observable.fromIterable(strList).concatMap(<span class="keyword">new</span> Function&lt;String, ObservableSource&lt;?&gt;&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> ObservableSource&lt;?&gt; apply(String s) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">            Log.d(TAG, <span class="string">&quot;doConcatMap: apply:&quot;</span> + s);</span><br><span class="line">            <span class="keyword">return</span> Observable.just(start + s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).cast(String.class).subscribe(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            Log.d(TAG, <span class="string">&quot;doConcatMap:&quot;</span> + s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="buffer"><a href="#buffer" class="headerlink" title="buffer"></a>buffer</h3><p>buffer 操作符可以将一组值一同发送，而不是一个一个发送。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doBuffer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">            .buffer(<span class="number">3</span>)</span><br><span class="line">            .subscribe(<span class="keyword">new</span> Consumer&lt;List&lt;Integer&gt;&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(List&lt;Integer&gt; integers)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                    Log.d(TAG, <span class="string">&quot;doBuffer: &quot;</span> + integers);</span><br><span class="line">                    Log.d(TAG, <span class="string">&quot;------------&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>日志如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">D&#x2F;RxJavaActivity: doBuffer: [1, 2, 3]</span><br><span class="line">D&#x2F;RxJavaActivity: ------------</span><br><span class="line">D&#x2F;RxJavaActivity: doBuffer: [4, 5, 6]</span><br><span class="line">D&#x2F;RxJavaActivity: ------------</span><br></pre></td></tr></table></figure>

<h3 id="groupBy"><a href="#groupBy" class="headerlink" title="groupBy"></a>groupBy</h3><p>groupBy 可以将 Observable 根据某个函数来分组。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doGroupBy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable&lt;GroupedObservable&lt;Character, String&gt;&gt; observable = Observable.just(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;pear&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;pen&quot;</span>, <span class="string">&quot;oreo&quot;</span>, <span class="string">&quot;pie&quot;</span>)</span><br><span class="line">            .groupBy(<span class="keyword">new</span> Function&lt;String, Character&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> Character <span class="title">apply</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> s.charAt(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">    Observable.concat(observable).subscribe(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            Log.d(TAG, <span class="string">&quot;doGroupBy:&quot;</span> + s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的方法将单词按照单词的第一个字母分组。</p>
<p>日志如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">D&#x2F;RxJavaActivity: doGroupBy:apple</span><br><span class="line">D&#x2F;RxJavaActivity: doGroupBy:pear</span><br><span class="line">D&#x2F;RxJavaActivity: doGroupBy:pen</span><br><span class="line">D&#x2F;RxJavaActivity: doGroupBy:pie</span><br><span class="line">D&#x2F;RxJavaActivity: doGroupBy:orange</span><br><span class="line">D&#x2F;RxJavaActivity: doGroupBy:oreo</span><br></pre></td></tr></table></figure>

<h2 id="过滤操作符"><a href="#过滤操作符" class="headerlink" title="过滤操作符"></a>过滤操作符</h2><p>过滤操作符有 filter、elementAt、distinct、skip、take、ignoreElements、throttleFirst 和 throttleWithTimeOut 等。</p>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p>filter 可以对 observable 进行过滤。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>).filter(<span class="keyword">new</span> Predicate&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">test</span><span class="params">(Integer integer)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> integer &gt; <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).subscribe(<span class="keyword">new</span> Consumer&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Integer integer)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            Log.d(TAG, <span class="string">&quot;filter:&quot;</span> + integer);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码可以过滤大于 2 的整数，即 3、4、5。</p>
<h3 id="elementAt"><a href="#elementAt" class="headerlink" title="elementAt"></a>elementAt</h3><p>elementAt 可以用来返回指定位置的数据。和它类似的有 elementAtOrDefault(int, T)，其可以允许默认值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doElementAt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>).elementAt(<span class="number">2</span>)</span><br><span class="line">            .subscribe((integer) -&gt; &#123;</span><br><span class="line">                Log.d(TAG, <span class="string">&quot;elementAt:&quot;</span> + integer);</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码会打印 3。</p>
<h3 id="distinct"><a href="#distinct" class="headerlink" title="distinct"></a>distinct</h3><p>distinct 可以用来去重，只允许没有发射过的数据项通过。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doDistinct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>).distinct()</span><br><span class="line">            .subscribe(integer -&gt; &#123;</span><br><span class="line">                Log.d(TAG, <span class="string">&quot;distinct:&quot;</span> + integer);</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码会打印12345，把重复的数字去掉。</p>
<h3 id="skip"><a href="#skip" class="headerlink" title="skip"></a>skip</h3><p>skip 可以跳过前 N 项。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doSkip</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">            .skip(<span class="number">3</span>)</span><br><span class="line">            .subscribe(integer -&gt; &#123;</span><br><span class="line">                Log.d(TAG, <span class="string">&quot;skip:&quot;</span> + integer);</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码会打印 45。</p>
<h3 id="take"><a href="#take" class="headerlink" title="take"></a>take</h3><p>take 可以只取前 N 项。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doTake</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">            .take(<span class="number">3</span>)</span><br><span class="line">            .subscribe(integer -&gt; Log.d(TAG, <span class="string">&quot;take:&quot;</span> + integer));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码会打印 123。</p>
<h3 id="ignoreElements"><a href="#ignoreElements" class="headerlink" title="ignoreElements"></a>ignoreElements</h3><p>ignoreElements 会忽略 observable 的元素。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doIgnoreElements</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">            .ignoreElements()</span><br><span class="line">            .subscribe(() -&gt; Log.d(TAG, <span class="string">&quot;onCompleted&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码会打印 onCompleted。</p>
<h3 id="throttleFirst"><a href="#throttleFirst" class="headerlink" title="throttleFirst"></a>throttleFirst</h3><p>throttleFirst 会定期发射指定时间段里的 Observable 发射的第一个数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doThrottleFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;Integer&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">                emitter.onNext(i);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            emitter.onComplete();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">            .throttleFirst(<span class="number">200</span>, TimeUnit.MILLISECONDS)</span><br><span class="line">            .subscribe(integer -&gt; Log.d(TAG, <span class="string">&quot;doThrottleFirst:&quot;</span> + integer));</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码会发射每个 200ms 内的第一个数据。输出结果不是固定的。</p>
<p>比如：<br>2019-08-23 23:19:44.614 12605-12605/com.caoshen.androidsample D/RxJavaActivity: doThrottleFirst:0<br>2019-08-23 23:19:44.939 12605-12605/com.caoshen.androidsample D/RxJavaActivity: doThrottleFirst:3<br>2019-08-23 23:19:45.141 12605-12605/com.caoshen.androidsample D/RxJavaActivity: doThrottleFirst:5<br>2019-08-23 23:19:45.361 12605-12605/com.caoshen.androidsample D/RxJavaActivity: doThrottleFirst:7<br>2019-08-23 23:19:45.571 12605-12605/com.caoshen.androidsample D/RxJavaActivity: doThrottleFirst:9</p>
<p>或者：<br>2019-08-23 23:21:27.135 12715-12715/com.caoshen.androidsample D/RxJavaActivity: doThrottleFirst:0<br>2019-08-23 23:21:27.341 12715-12715/com.caoshen.androidsample D/RxJavaActivity: doThrottleFirst:2<br>2019-08-23 23:21:27.565 12715-12715/com.caoshen.androidsample D/RxJavaActivity: doThrottleFirst:4<br>2019-08-23 23:21:27.884 12715-12715/com.caoshen.androidsample D/RxJavaActivity: doThrottleFirst:7</p>
<h3 id="throttleWithTimeOut"><a href="#throttleWithTimeOut" class="headerlink" title="throttleWithTimeOut"></a>throttleWithTimeOut</h3><p>throttleWithTimeOut 通过时间来限流。每次发射一个数据就会计时。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doThrottleWithTimeOut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;Integer&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">                emitter.onNext(i);</span><br><span class="line">                <span class="keyword">int</span> sleep = <span class="number">100</span>;</span><br><span class="line">                <span class="keyword">if</span> (i % <span class="number">3</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                    sleep = <span class="number">300</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(sleep);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            emitter.onComplete();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">            .throttleWithTimeout(<span class="number">200</span>, TimeUnit.MILLISECONDS)</span><br><span class="line">            .subscribe(integer -&gt; Log.d(TAG, <span class="string">&quot;doThrottleFirst:&quot;</span> + integer));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码如果是 3 的倍数就 sleep 300 毫秒，否则 sleep 100 毫秒。设定过滤时间是 200 毫秒，也就是说间隔小于 200 的会被过滤。</p>
<p>输出日志如下：</p>
<p>2019-08-23 23:32:36.480 13107-13133/com.caoshen.androidsample D/RxJavaActivity: doThrottleFirst:0<br>2019-08-23 23:32:36.988 13107-13133/com.caoshen.androidsample D/RxJavaActivity: doThrottleFirst:3<br>2019-08-23 23:32:37.536 13107-13133/com.caoshen.androidsample D/RxJavaActivity: doThrottleFirst:6<br>2019-08-23 23:32:38.056 13107-13133/com.caoshen.androidsample D/RxJavaActivity: doThrottleFirst:9</p>
<h2 id="组合操作符"><a href="#组合操作符" class="headerlink" title="组合操作符"></a>组合操作符</h2><p>组合操作符有 startWith、merge、concat、zip 和 combineLatest 等。</p>
<h3 id="startWith"><a href="#startWith" class="headerlink" title="startWith"></a>startWith</h3><p>startWith 操作符会在 Observable 发射的数据前面插上一些数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doStartWith</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">            .startWith(<span class="number">1</span>)</span><br><span class="line">            .subscribe(integer -&gt; Log.d(TAG, <span class="string">&quot;doStartWith:&quot;</span> + integer));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码会在最前面添加 1。</p>
<h3 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h3><p>merge 操作符会将多个 Observable 合并到一个 Observable。merge 可能会让合并的 Observable 发射的数据交错。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doMerge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable&lt;Integer&gt; observable1 = Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>).subscribeOn(Schedulers.io());</span><br><span class="line">    Observable&lt;Integer&gt; observable2 = Observable.just(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);</span><br><span class="line">    Observable.merge(observable1, observable2)</span><br><span class="line">            .subscribe(integer -&gt; Log.d(TAG, <span class="string">&quot;doMerge:&quot;</span> + integer));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果为456123。</p>
<h3 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h3><p>concat 操作符会将多个 Observable 合并到一个 Observable，并且按照顺序发射数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doConcat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable&lt;Integer&gt; observable1 = Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>).subscribeOn(Schedulers.io());</span><br><span class="line">    Observable&lt;Integer&gt; observable2 = Observable.just(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);</span><br><span class="line">    Observable.concat(observable1, observable2)</span><br><span class="line">            .subscribe(integer -&gt; Log.d(TAG, <span class="string">&quot;doConcat:&quot;</span> + integer));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果为123456。</p>
<h3 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h3><p>zip 操作符合并两个或者多个 observable 发射的数据源。根据指定的函数变化它们，并且发送一个新值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doZip</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable&lt;Integer&gt; observable1 = Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">    Observable&lt;String&gt; observable2 = Observable.just(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line">    Observable.zip(observable1, observable2, <span class="keyword">new</span> BiFunction&lt;Integer, String, String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">apply</span><span class="params">(Integer integer, String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> integer + s;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).subscribe(s -&gt; Log.d(TAG, <span class="string">&quot;doZip:&quot;</span> + s));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码将 2 个 observable 对应位置的值组合成一个字符串并返回新的 observable。</p>
<p>输出结果 1a、2b、3c。</p>
<h3 id="combineLatest"><a href="#combineLatest" class="headerlink" title="combineLatest"></a>combineLatest</h3><p>combineLatest 将 Observable 最新发射的数据组合在一起。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doCompileLatest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable&lt;Integer&gt; observable1 = Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">    Observable&lt;String&gt; observable2 = Observable.just(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line">    Observable.combineLatest(observable1, observable2, <span class="keyword">new</span> BiFunction&lt;Integer, String, String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">apply</span><span class="params">(Integer integer, String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> integer + s;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).subscribe(s -&gt; Log.d(TAG, <span class="string">&quot;doCompileLatest:&quot;</span> + s));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码 observable1 发射数据时，observable2 还没有发射数据，combineLatest 将 observable1 的最新数据 3 和 observable2 的每个数据组合。</p>
<p>输出结果：3a、3b、3c。</p>
<h2 id="辅助操作符"><a href="#辅助操作符" class="headerlink" title="辅助操作符"></a>辅助操作符</h2><p>辅助操作符可以帮助我们更加方便地处理 Observable。辅助操作符包括 delay、do、subscribeOn、observeOn、timeout、materialize、timeInterval、timestamp 和 to 等。</p>
<p>这里介绍 delay、do、subscribeOn、observeOn、timeout。</p>
<h3 id="delay"><a href="#delay" class="headerlink" title="delay"></a>delay</h3><p>delay 可以在 Observable 发射每项数据之前都暂停一段指定的时间段，即延迟发射。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doDelay</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;Long&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;Long&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            emitter.onNext(System.currentTimeMillis() / <span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">            .delay(<span class="number">2</span>, TimeUnit.SECONDS)</span><br><span class="line">            .subscribe(aLong -&gt; Log.d(TAG, <span class="string">&quot;delay:&quot;</span> + (System.currentTimeMillis() / <span class="number">1000</span> - aLong)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码输出 2，延迟 2 秒发射。</p>
<h3 id="do"><a href="#do" class="headerlink" title="do"></a>do</h3><p>do 系列操作符为原始 Observable 的生命周期事件注册一个回调。当 Observable 的某个事件发生时就会调用这些回调。RxJava 中有很多 Do 系列操作符，如下所示：</p>
<ol>
<li>doOnEach 当 Observable 每发射一项数据时就会调用它一次，包括 onNext、onCompleted、onError。</li>
<li>doOnNext 当 onNext 时会被调用。</li>
<li>doOnSubscribe 当观察者订阅 observable 时会被调用</li>
<li>doOnUnsubscribe 当观察者取消订阅时会被调用，observable 通过 onError 或者 onCompleted 结束时，会取消订阅所有的 subscriber。</li>
<li>doOnCompleted 当 observable 正常终止调用 onCompleted 时会被调用。</li>
<li>doOnError 当 observable 异常终止调用 onError 时会被调用。</li>
<li>doOnTerminate 当 observable 终止，无论是正常终止还是异常终止之前都会被调用。</li>
<li>finallyDo 当 observable 终止，无论是正常终止还是异常终止之后都会被调用。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doOnNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">            .doOnNext(integer -&gt; Log.d(TAG, <span class="string">&quot;doOnNext:&quot;</span> + integer))</span><br><span class="line">            .subscribe(integer -&gt; Log.d(TAG, <span class="string">&quot;onNext:&quot;</span> + integer),</span><br><span class="line">                    throwable -&gt; Log.d(TAG, <span class="string">&quot;onError:&quot;</span> + throwable.getMessage()),</span><br><span class="line">                    () -&gt; Log.d(TAG, <span class="string">&quot;onCompleted&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">doOnNext:1</span><br><span class="line">onNext:1</span><br><span class="line">doOnNext:2</span><br><span class="line">onNext:2</span><br><span class="line">onCompleted</span><br></pre></td></tr></table></figure>

<h3 id="subscribeOn-和-observeOn"><a href="#subscribeOn-和-observeOn" class="headerlink" title="subscribeOn 和 observeOn"></a>subscribeOn 和 observeOn</h3><p>subscribeOn 用于指定 observable 自身在哪个线程上运行。</p>
<p>observeOn 用于指定 observable 所运行的线程，也就是发射出的数据在哪个线程上使用。一般情况下会指定在主线程中运行，这样就可以修改 UI。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doSubscribleOn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            Log.d(TAG, <span class="string">&quot;Observable:&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">            emitter.onNext(<span class="number">1</span>);</span><br><span class="line">            emitter.onComplete();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).subscribeOn(Schedulers.newThread())</span><br><span class="line">            .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">            .subscribe(<span class="keyword">new</span> Consumer&lt;Integer&gt;() &#123;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Integer integer)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                    Log.d(TAG, <span class="string">&quot;Observer:&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的代码 Observable 在子线程执行，Observer 在主线程执行。</p>
<p>输出结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Observable:RxNewThreadScheduler-1</span><br><span class="line">Observer:main</span><br></pre></td></tr></table></figure>

<h3 id="timeout"><a href="#timeout" class="headerlink" title="timeout"></a>timeout</h3><p>如果原始 Observable 过了指定的一段时长没有发射任何数据，timeout 操作符会以一个 onError 通知终止这个 Observable，或者继续执行一个备用的 Observable。timeout 有很多种变体。这里介绍其中的一种：timeout(long, TimeUnit, Observable)，它会在超时的时候切换到使用另一个备用的 Observable，而不是发送错误通知。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doTimeout</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;Integer&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(i * <span class="number">100</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                emitter.onNext(i);</span><br><span class="line">            &#125;</span><br><span class="line">            emitter.onComplete();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).timeout(<span class="number">200</span>, TimeUnit.MILLISECONDS, Observable.just(<span class="number">10</span>, <span class="number">11</span>))</span><br><span class="line">            .subscribe(integer -&gt; Log.d(TAG, <span class="string">&quot;doTimeout:&quot;</span> + integer));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码设置了 200 ms 的超时，超时后发送 10 和 11。</p>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">doTimeout:0</span><br><span class="line">doTimeout:1</span><br><span class="line">doTimeout:10</span><br><span class="line">doTimeout:11</span><br></pre></td></tr></table></figure>

<p>也有可能是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">doTimeout:0</span><br><span class="line">doTimeout:1</span><br><span class="line">doTimeout:2</span><br><span class="line">doTimeout:10</span><br><span class="line">doTimeout:11</span><br></pre></td></tr></table></figure>

<h2 id="错误处理操作符"><a href="#错误处理操作符" class="headerlink" title="错误处理操作符"></a>错误处理操作符</h2><p>RxJava 在错误出现的时候就会调用 Subscriber 的 onError 方法将错误分发出去，有 Subscriber 自己来处理错误。如果每个 Subscriber 都处理一遍的话，工作量大，这时候可以使用错误操作符。错误操作符有 catch 和 retry。</p>
<h3 id="catch"><a href="#catch" class="headerlink" title="catch"></a>catch</h3><p>catch 操作符拦截原始 Observable 的 onError 通知，将它替换成其他数据项或数据序列，让产生的 Observable 能够正常终止或者根本不终止。RxJava 将 catch 实现为以下 3 个不同的操作符。</p>
<ol>
<li>onErrorReturn</li>
<li>onErrorResumeNext</li>
<li>onExceptionResumeNext</li>
</ol>
<p>onErrorReturn: Observable 遇到错误时返回备用的 Observable，备用 Observable 会忽略原有 Observable 的 onError 调用，不会将错误传递给观察者。作为替代，它会发射一个特殊的项并且调用观察者的 onCompleted 方法。</p>
<p>onErrorResumeNext: Observable 遇到错误时返回备用的 Observable，备用 Observable 会忽略原有 Observable 的 onError 调用，不会将错误传递给观察者。作为替代，它会发射备用的 Observable 数据。</p>
<p>onExceptionResumeNext: 它和 onErrorResumeNext 类似。不同的是，如果 onError 收到的 Throwable 不是一个 Exception，它会将错误传递给观察者的 onError 方法，不会使用备用的 Observable。</p>
<p>这里用 onErrorReturn 操作符来举例。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doOnErrorReturn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;Integer&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i &gt; <span class="number">3</span>) &#123;</span><br><span class="line">                    emitter.onError(<span class="keyword">new</span> Throwable(<span class="string">&quot;throwable&quot;</span>));</span><br><span class="line">                &#125;</span><br><span class="line">                emitter.onNext(i);</span><br><span class="line">            &#125;</span><br><span class="line">            emitter.onComplete();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).onErrorReturn(throwable -&gt; <span class="number">6</span>)</span><br><span class="line">            .subscribe(integer -&gt; Log.d(TAG, <span class="string">&quot;onNext:&quot;</span> + integer),</span><br><span class="line">                    throwable -&gt; Log.d(TAG, <span class="string">&quot;onError:&quot;</span> + throwable.getMessage()),</span><br><span class="line">                    () -&gt; Log.d(TAG, <span class="string">&quot;onComplete:&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码当 i = 4 时抛出异常，onErrorReturn 返回 6。</p>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onNext:0</span><br><span class="line">onNext:1</span><br><span class="line">onNext:2</span><br><span class="line">onNext:3</span><br><span class="line">onNext:6</span><br><span class="line">onComplete:</span><br></pre></td></tr></table></figure>

<p>注意如果以上代码改为 i &gt; 2，那么当 i = 3 和 4 时都会抛出异常，这是程序会 crash。抛出异常如下：<br>io.reactivex.exceptions.UndeliverableException: The exception could not be delivered to the consumer because it has already canceled/disposed the flow or the exception has nowhere to go to begin with.</p>
<h3 id="retry"><a href="#retry" class="headerlink" title="retry"></a>retry</h3><p>retry 操作符不会将原始的 Observable 的 onError 通知传递给观察者，它会订阅这个 Observable，再给它一次机会无错误地完成其数据序列。</p>
<p>retry 总是传递 onNext 给观察者，由于重新订阅，可能造成数据项重复。</p>
<p>Rxjava 中的实现为 retry 和 retryWhen。</p>
<p>这里以 retry(long) 来举例，它指定最多重新订阅的次数。如果次数超了，它不会重新订阅，而会把最新的一个 onError 通知传递给自己的观察者。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doRetry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;Integer&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == <span class="number">1</span>) &#123;</span><br><span class="line">                    emitter.onError(<span class="keyword">new</span> Throwable(<span class="string">&quot;throwable&quot;</span>));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    emitter.onNext(i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            emitter.onComplete();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).retry(<span class="number">2</span>)</span><br><span class="line">            .subscribe(integer -&gt; Log.d(TAG, <span class="string">&quot;onNext:&quot;</span> + integer),</span><br><span class="line">                    throwable -&gt; Log.d(TAG, <span class="string">&quot;onError:&quot;</span> + throwable.getMessage()),</span><br><span class="line">                    () -&gt; Log.d(TAG, <span class="string">&quot;onComplete:&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码会重试 2 次。</p>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onNext:0</span><br><span class="line">onNext:0</span><br><span class="line">onError:throwable</span><br></pre></td></tr></table></figure>
<p>多次重复依然如此。少走了一次 onNext: 0。</p>
<p>如果以上代码改为 if (i == 2)，输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">onNext:0</span><br><span class="line">onNext:1</span><br><span class="line">onNext:0</span><br><span class="line">onNext:1</span><br><span class="line">onNext:0</span><br><span class="line">onNext:1</span><br><span class="line">onError:throwable</span><br></pre></td></tr></table></figure>

<h2 id="条件操作符和布尔操作符"><a href="#条件操作符和布尔操作符" class="headerlink" title="条件操作符和布尔操作符"></a>条件操作符和布尔操作符</h2><p>条件操作符和布尔操作符可用于根据条件发射或变换 Observable，或者对它们做布尔运算。</p>
<h3 id="条件操作符"><a href="#条件操作符" class="headerlink" title="条件操作符"></a>条件操作符</h3><p>条件操作符有 amb、defaultIfEmpty、skipUntil、skipWhile、takeUntil 和takeWhile 等。这里介绍前两种：</p>
<h4 id="amb-ambArray"><a href="#amb-ambArray" class="headerlink" title="amb (ambArray)"></a>amb (ambArray)</h4><p>amb 操作符对于给定的两个或者多个 Observable，它只发射首先发射数据或通知的那个 Observable 的所有数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doAmpArray</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.ambArray(Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>).delay(<span class="number">2</span>, TimeUnit.SECONDS),</span><br><span class="line">            Observable.just(<span class="number">4</span>, <span class="number">5</span>,<span class="number">6</span>))</span><br><span class="line">            .subscribe(integer -&gt; Log.d(TAG, <span class="string">&quot;ambArray:&quot;</span> + integer));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ambArray:4</span><br><span class="line">ambArray:5</span><br><span class="line">ambArray:6</span><br></pre></td></tr></table></figure>

<h4 id="defaultIfEmpty"><a href="#defaultIfEmpty" class="headerlink" title="defaultIfEmpty"></a>defaultIfEmpty</h4><p>发射来自原始 Observable 的数据。如果原始 Observable 没有发射数据，就发射一个默认数据，如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doDefaultIfEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;Integer&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            emitter.onComplete();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).defaultIfEmpty(<span class="number">3</span>)</span><br><span class="line">            .subscribe(integer -&gt; Log.d(TAG, <span class="string">&quot;defaultIfEmpty:&quot;</span> + integer));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码没有发射数据就返回 3。</p>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaultIfEmpty:3</span><br></pre></td></tr></table></figure>

<h3 id="布尔操作符"><a href="#布尔操作符" class="headerlink" title="布尔操作符"></a>布尔操作符</h3><p>布尔操作符有 all、contains、isEmpty、exists 和 sequenceEqual，这里介绍前 3 个操作符。</p>
<h4 id="all"><a href="#all" class="headerlink" title="all"></a>all</h4><p>all 操作符用一个函数对所有数据做判断，如果每个都满足，则返回 true，否则返回 false。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">            .all(integer -&gt; integer &lt; <span class="number">3</span>)</span><br><span class="line">            .subscribe(aBoolean -&gt; Log.d(TAG, <span class="string">&quot;all:&quot;</span> + aBoolean));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码返回是否所有的数都小于 3。</p>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">all:false</span><br></pre></td></tr></table></figure>

<h4 id="contains-和-isEmpty"><a href="#contains-和-isEmpty" class="headerlink" title="contains 和 isEmpty"></a>contains 和 isEmpty</h4><p>contains 操作符用来判断源 Observable 所发射的数据是否包含某一个数据。如果包含该数据，会返回 true；如果 Observable 已经结束了却还没有发射这个数据，则返回 false。</p>
<p>isEmpty 与 contains 完全相反。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doContains</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>).contains(<span class="number">1</span>).subscribe(aBoolean -&gt; Log.d(TAG, <span class="string">&quot;contains:&quot;</span> + aBoolean));</span><br><span class="line">    Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>).isEmpty().subscribe(aBoolean -&gt; Log.d(TAG, <span class="string">&quot;isEmpty:&quot;</span> + aBoolean));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">contains:true</span><br><span class="line">isEmpty:false</span><br></pre></td></tr></table></figure>

<h2 id="转换操作符"><a href="#转换操作符" class="headerlink" title="转换操作符"></a>转换操作符</h2><p>转换操作符用来将 Observable 转换成为另一个对象或者数据结构，转换操作符有 toList、toSortedList、toMap、toMultiMap、getIterator 和 nest 等，这里介绍前 3 种。</p>
<h3 id="toList"><a href="#toList" class="headerlink" title="toList"></a>toList</h3><p>toList 将多个数据转换成一个 list。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doToList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>).toList().subscribe(integers -&gt; &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : integers) &#123;</span><br><span class="line">            Log.d(TAG, <span class="string">&quot;toList:&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">toList:1</span><br><span class="line">toList:2</span><br><span class="line">toList:3</span><br></pre></td></tr></table></figure>

<h3 id="toSortedList"><a href="#toSortedList" class="headerlink" title="toSortedList"></a>toSortedList</h3><p>toSortedList 类似 toList，但是它是有序的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doToSortedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>).toSortedList().subscribe(integers -&gt; &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : integers) &#123;</span><br><span class="line">            Log.d(TAG, <span class="string">&quot;toSortedList:&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">toSortedList:1</span><br><span class="line">toSortedList:2</span><br><span class="line">toSortedList:3</span><br></pre></td></tr></table></figure>

<h3 id="toMap"><a href="#toMap" class="headerlink" title="toMap"></a>toMap</h3><p>toMap 操作符将发射的所有数据集合到一个 Map （默认 HashMap），然后发射这个 Map。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doToMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable.just(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;oreo&quot;</span>, <span class="string">&quot;pie&quot;</span>, <span class="string">&quot;pear&quot;</span>)</span><br><span class="line">            .toMap(s -&gt; s.charAt(<span class="number">0</span>))</span><br><span class="line">            .subscribe(m -&gt; Log.d(TAG, <span class="string">&quot;toMap:&quot;</span> + m.toString()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">toMap:&#123;p&#x3D;pear, a&#x3D;apple, b&#x3D;banana, o&#x3D;oreo&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码可以看出 o 开头的是排在后面的 oreo，p 开头的是排在后面的 pear。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">caoshen</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.okclouder.cn/2020/11/26/RxJava%20%E6%93%8D%E4%BD%9C%E7%AC%A6%E4%BB%8B%E7%BB%8D/">https://www.okclouder.cn/2020/11/26/RxJava%20%E6%93%8D%E4%BD%9C%E7%AC%A6%E4%BB%8B%E7%BB%8D/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.okclouder.cn" target="_blank">caoshen</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://pic1.zhimg.com/80/v2-53cf7b4f3782749070a4207dd4d4888b_1440w.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/11/26/RxJava%20%E8%AE%A2%E9%98%85%E8%BF%87%E7%A8%8B%E8%A7%A3%E6%9E%90/"><img class="prev-cover" src="https://pic4.zhimg.com/80/v2-6b20602cb7a9df995b44cf3c20af1ca6_1440w.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info"></div></div></a></div><div class="next-post pull-right"><a href="/2020/11/26/RxJava%20%E7%BA%BF%E7%A8%8B%E6%8E%A7%E5%88%B6/"><img class="next-cover" src="https://pic4.zhimg.com/80/v2-6b20602cb7a9df995b44cf3c20af1ca6_1440w.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info"></div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/3806787?s=460&amp;u=ee280a9fc6c98bc591f30ffbf10360a9ac3822ff&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">caoshen</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">151</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/caoshen"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/caoshen" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">hello</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#RxJava-%E6%93%8D%E4%BD%9C%E7%AC%A6%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">RxJava 操作符介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.1.</span> <span class="toc-text">创建操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#create"><span class="toc-number">1.1.1.</span> <span class="toc-text">create</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#just"><span class="toc-number">1.1.2.</span> <span class="toc-text">just</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fromArray"><span class="toc-number">1.1.3.</span> <span class="toc-text">fromArray</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#interval"><span class="toc-number">1.1.4.</span> <span class="toc-text">interval</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#range"><span class="toc-number">1.1.5.</span> <span class="toc-text">range</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#repeat"><span class="toc-number">1.1.6.</span> <span class="toc-text">repeat</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E6%8D%A2%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.2.</span> <span class="toc-text">变换操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#map"><span class="toc-number">1.2.1.</span> <span class="toc-text">map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flatMap-%E5%92%8C-cast"><span class="toc-number">1.2.2.</span> <span class="toc-text">flatMap 和 cast</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#concatMap"><span class="toc-number">1.2.3.</span> <span class="toc-text">concatMap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#buffer"><span class="toc-number">1.2.4.</span> <span class="toc-text">buffer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#groupBy"><span class="toc-number">1.2.5.</span> <span class="toc-text">groupBy</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.3.</span> <span class="toc-text">过滤操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#filter"><span class="toc-number">1.3.1.</span> <span class="toc-text">filter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#elementAt"><span class="toc-number">1.3.2.</span> <span class="toc-text">elementAt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#distinct"><span class="toc-number">1.3.3.</span> <span class="toc-text">distinct</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#skip"><span class="toc-number">1.3.4.</span> <span class="toc-text">skip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#take"><span class="toc-number">1.3.5.</span> <span class="toc-text">take</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ignoreElements"><span class="toc-number">1.3.6.</span> <span class="toc-text">ignoreElements</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#throttleFirst"><span class="toc-number">1.3.7.</span> <span class="toc-text">throttleFirst</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#throttleWithTimeOut"><span class="toc-number">1.3.8.</span> <span class="toc-text">throttleWithTimeOut</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.4.</span> <span class="toc-text">组合操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#startWith"><span class="toc-number">1.4.1.</span> <span class="toc-text">startWith</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#merge"><span class="toc-number">1.4.2.</span> <span class="toc-text">merge</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#concat"><span class="toc-number">1.4.3.</span> <span class="toc-text">concat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zip"><span class="toc-number">1.4.4.</span> <span class="toc-text">zip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#combineLatest"><span class="toc-number">1.4.5.</span> <span class="toc-text">combineLatest</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%85%E5%8A%A9%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.5.</span> <span class="toc-text">辅助操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#delay"><span class="toc-number">1.5.1.</span> <span class="toc-text">delay</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#do"><span class="toc-number">1.5.2.</span> <span class="toc-text">do</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#subscribeOn-%E5%92%8C-observeOn"><span class="toc-number">1.5.3.</span> <span class="toc-text">subscribeOn 和 observeOn</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#timeout"><span class="toc-number">1.5.4.</span> <span class="toc-text">timeout</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.6.</span> <span class="toc-text">错误处理操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#catch"><span class="toc-number">1.6.1.</span> <span class="toc-text">catch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#retry"><span class="toc-number">1.6.2.</span> <span class="toc-text">retry</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%AC%A6%E5%92%8C%E5%B8%83%E5%B0%94%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.7.</span> <span class="toc-text">条件操作符和布尔操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.7.1.</span> <span class="toc-text">条件操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#amb-ambArray"><span class="toc-number">1.7.1.1.</span> <span class="toc-text">amb (ambArray)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#defaultIfEmpty"><span class="toc-number">1.7.1.2.</span> <span class="toc-text">defaultIfEmpty</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.7.2.</span> <span class="toc-text">布尔操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#all"><span class="toc-number">1.7.2.1.</span> <span class="toc-text">all</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#contains-%E5%92%8C-isEmpty"><span class="toc-number">1.7.2.2.</span> <span class="toc-text">contains 和 isEmpty</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.8.</span> <span class="toc-text">转换操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#toList"><span class="toc-number">1.8.1.</span> <span class="toc-text">toList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toSortedList"><span class="toc-number">1.8.2.</span> <span class="toc-text">toSortedList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toMap"><span class="toc-number">1.8.3.</span> <span class="toc-text">toMap</span></a></li></ol></li></ol></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2020/11/26/%E4%B8%A4%E6%A3%B5%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E5%85%83%E7%B4%A0/" title="无题"><img src="https://pic2.zhimg.com/80/v2-de84195207d783e0ed3bfb99f151f23e_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/26/%E4%B8%A4%E6%A3%B5%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E5%85%83%E7%B4%A0/" title="无题">无题</a><time datetime="2020-11-26T13:13:31.929Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/26/%E4%BB%80%E4%B9%88%E6%98%AF%E4%BD%8E%E5%8A%9F%E8%80%97%E8%93%9D%E7%89%99%E6%8A%80%E6%9C%AF/" title="无题"><img src="https://pic4.zhimg.com/80/v2-6b20602cb7a9df995b44cf3c20af1ca6_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/26/%E4%BB%80%E4%B9%88%E6%98%AF%E4%BD%8E%E5%8A%9F%E8%80%97%E8%93%9D%E7%89%99%E6%8A%80%E6%9C%AF/" title="无题">无题</a><time datetime="2020-11-26T13:13:31.929Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/26/%E5%88%86%E6%95%B0%E5%88%B0%E5%B0%8F%E6%95%B0/" title="无题"><img src="https://pic4.zhimg.com/80/v2-6b20602cb7a9df995b44cf3c20af1ca6_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/26/%E5%88%86%E6%95%B0%E5%88%B0%E5%B0%8F%E6%95%B0/" title="无题">无题</a><time datetime="2020-11-26T13:13:31.929Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/26/%E8%BF%9E%E7%BB%AD%E6%AD%A3%E6%95%B4%E6%95%B0%E4%B9%8B%E5%92%8C/" title="无题"><img src="https://pic4.zhimg.com/80/v2-905b30ef749b15963046e9bd1d41f195_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/26/%E8%BF%9E%E7%BB%AD%E6%AD%A3%E6%95%B4%E6%95%B0%E4%B9%8B%E5%92%8C/" title="无题">无题</a><time datetime="2020-11-26T13:13:31.929Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/26/%E5%92%8C%E4%B8%BA%E9%9B%B6%E7%9A%84N%E4%B8%AA%E5%94%AF%E4%B8%80%E6%95%B4%E6%95%B0/" title="无题"><img src="https://pic2.zhimg.com/80/v2-c7340c6fe9eb200f4d5ca37e1b7c571e_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/26/%E5%92%8C%E4%B8%BA%E9%9B%B6%E7%9A%84N%E4%B8%AA%E5%94%AF%E4%B8%80%E6%95%B4%E6%95%B0/" title="无题">无题</a><time datetime="2020-11-26T13:13:31.928Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 By caoshen</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="icp"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><span>鄂ICP备18020323号</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: '',
      appKey: '',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'en',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign({}, initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>