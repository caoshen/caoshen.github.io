# 分数到小数

给定两个整数，分别表示分数的分子 numerator 和分母 denominator，以字符串形式返回小数。

如果小数部分为循环小数，则将循环的部分括在括号内。

示例 1:

```
输入: numerator = 1, denominator = 2
输出: "0.5"
```

示例 2:

```
输入: numerator = 2, denominator = 1
输出: "2"
```

示例 3:

```
输入: numerator = 2, denominator = 3
输出: "0.(6)"
```

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/fraction-to-recurring-decimal
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。

## 思路

分数一定可以转化成循环小数的形式。为了找到循环部分，需要一个 Map 保存之前出现过的余数。如果余数重复出现，说明找到了循环部分，需要在循环开始前插入左括号，因此使用 Map 的 value 保存当前分数的长度作为插入位置。

另外需要考虑边界条件，比如：

1. 被除数为 0，直接返回 0
2. 除数为 0，异常情况，这里可以不做处理
3. 能整除的情况，不需要加小数点
4. 正负数的情况，使用异或运算处理


## 解答

```java
class Solution {
    public String fractionToDecimal(int numerator, int denominator) {
        if (numerator == 0) {
            return "0";
        }
        StringBuilder fraction = new StringBuilder();
        // only one number is negative
        if (numerator < 0 ^ denominator < 0) {
            fraction.append("-");
        }
        // convert to positive long type
        long dividend = Math.abs(Long.valueOf(numerator));
        long divisor = Math.abs(Long.valueOf(denominator));
        // add integer part to fraction
        fraction.append(dividend / divisor);
        // fraction is integer
        long remainder = dividend % divisor;
        if (remainder == 0) {
            return fraction.toString();
        }
        // is fraction
        fraction.append(".");
        // create a remainder-length map
        Map<Long, Integer> map = new HashMap<>();
        while (remainder != 0) {
            if (map.containsKey(remainder)) {
                // find a loop fraction
                fraction.insert(map.get(remainder), "(");
                fraction.append(")");
                break;
            }
            map.put(remainder, fraction.length());
            remainder *= 10;
            fraction.append(remainder / divisor);
            remainder %= divisor;
        }
        return fraction.toString();

    }
}
```

## 参考

166. 分数到小数 https://leetcode-cn.com/problems/fraction-to-recurring-decimal/