<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>caoshen - caoshen 的博客</title><meta name="author" content="caoshen"><meta name="copyright" content="caoshen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta property="og:type" content="website">
<meta property="og:title" content="caoshen">
<meta property="og:url" content="https://www.okclouder.cn/page/7/index.html">
<meta property="og:site_name" content="caoshen">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://avatars2.githubusercontent.com/u/3806787?s=460&u=ee280a9fc6c98bc591f30ffbf10360a9ac3822ff&v=4">
<meta property="article:author" content="caoshen">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://avatars2.githubusercontent.com/u/3806787?s=460&u=ee280a9fc6c98bc591f30ffbf10360a9ac3822ff&v=4"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.okclouder.cn/page/7/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2020-11-26 21:56:10'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="caoshen" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/3806787?s=460&amp;u=ee280a9fc6c98bc591f30ffbf10360a9ac3822ff&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">151</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(http://cdn.okclouder.cn/j-lee-uySbEmywols-unsplash.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">caoshen</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="site-info"><h1 id="site-title">caoshen</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/caoshen" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/11/26/AsyncTask%20%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/" title="无题">     <img class="post_bg" src="http://cdn.okclouder.cn/matteo-cancellieri-i5pwOdrX9l0-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/26/AsyncTask%20%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-26T13:13:31.895Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></span></div><div class="content">AsyncTask 异步任务AsyncTask 是 Android 的异步任务类，它本质上是对 Thread 和 Handler 的封装，达到工作线程执行异步任务，执行完毕后切换到主线程的功能。
AsyncTask 的执行顺序以 SDK 28 为例，默认情况下，调用 execute 方法，AsyncTask 的任务都是串行的。比如有 10 个 AsyncTask 同时开始执行，实际上当前一个 AsyncTask 执行完毕后，下一个AsyncTask 才会真正开始执行。
1234@MainThreadpublic final AsyncTask&lt;Params, Progress, Result&gt; execute(Params... params) &#123;    return executeOnExecutor(sDefaultExecutor, params);&#125;

以上代码可以看出，默认使用了 sDefaultExecutor 来执行异步任务。
1private static volatile Executor sDefaultExecutor = SERI ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/11/26/Binder%20%E7%AC%94%E8%AE%B0/" title="无题">     <img class="post_bg" src="http://cdn.okclouder.cn/david-kovalenko-aQzh7VC-0H0-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/26/Binder%20%E7%AC%94%E8%AE%B0/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-26T13:13:31.895Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></span></div><div class="content">Binder 笔记Binder 是 Android RPC 机制的核心基础类，它实现了 IBinder 接口。Android 中跨进程通信一般都涉及到了 Binder 调用。
Binder 简介Binder 类位于 /frameworks/base/core/java/android/os/Binder.java 文件中。
大多数使用Binder的时候，不是直接实现Binder类，而是通过 AIDL(Android 接口描述语言) 文件描述接口方法，然后用 Android Studio 自动编译产生 AIDL 对应的 Binder 子类。当然，也可以不用 AIDL， 直接写一个继承 Binder 的类来使用。
因为 Binder 类是一个基础 IPC 原语，所以它对应用的生命周期没有影响，只要创建它的进程在运行，Binder 就是有效的。一般我们会在应用的顶级组件，比如 Servce、Activity、ContentProvider，以让系统知道 Binder 所在进程正在运行中。
如果 Binder 所在的进程停止了，当进程重启时，需要重新创建 Binder 并且绑定到进程。比如在  ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/11/26/Binder%E3%80%81IBinder%20%E5%92%8C%20IInterface%20%E7%9A%84%E5%85%B3%E7%B3%BB/" title="无题">     <img class="post_bg" src="http://cdn.okclouder.cn/j-lee-uySbEmywols-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/26/Binder%E3%80%81IBinder%20%E5%92%8C%20IInterface%20%E7%9A%84%E5%85%B3%E7%B3%BB/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-26T13:13:31.895Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></span></div><div class="content">Binder、IBinder 和 IInterface 的关系IBinder 接口Binder 实现了 IBinder 接口。
123public class Binder implements IBinder &#123;    ...&#125;

IBinder 接口定义了一些常量和方法。比如第一个交易码（transaction code）和最后一个交易码。
最小的交易码是 1，最大的交易码是 16 ^ 6 - 1 = 16777215。其他的交易码处于这两个值之间。可以看出最多有 16777215 个 transaction。
12345678/** * The first transaction code available for user commands. */int FIRST_CALL_TRANSACTION  = 0x00000001;/** * The last transaction code available for user commands. */int LAST_CALL_TRANSACTION   = 0x00ffffff;

IBinder 接口 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/11/26/Application%20%E7%9A%84%20onCreate%20%E5%92%8C%20attachBaseContext/" title="无题">     <img class="post_bg" src="http://cdn.okclouder.cn/j-lee-uySbEmywols-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/26/Application%20%E7%9A%84%20onCreate%20%E5%92%8C%20attachBaseContext/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-26T13:13:31.894Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></span></div><div class="content">Application 的 onCreate 和 attachBaseContextApplication 的 onCreate 和 attachBaseContext 是 Application 的两个回调方法，通常我们会在其中做一些初始化操作。
onCreate 和 attachBaseContext 顺序Application 的 attachBaseContext 在 onCreate 之前执行。
handleBindApplicationApp 的 application 创建是在 ActivityThread 的 handleBindApplication 方法完成的。
123456789101112131415161718192021222324private void handleBindApplication(AppBindData data) &#123;    ...    // If the app is Honeycomb MR1 or earlier, switch its AsyncTask    // implementation to use the  ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/11/26/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" title="无题">     <img class="post_bg" src="http://cdn.okclouder.cn/aarn-giri-9fT545xEwZM-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/26/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-26T13:13:31.893Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></span></div><div class="content">Android 源码的抽象工厂模式抽象工厂模式介绍抽象工厂模式也是创建型模式之一。抽象工厂模式起源于以前对不同操作系统的图形化解决方案。如不同操作系统中的按钮和文本框控件实现不同，展示效果也不一样，对于每个操作系统，其本身就构成一个产品类，而按钮与文本框控件也构成一个产品类，两种产品类两种变化，各自有自己的特性。
抽象工厂模式的定义为创建一组相关或者是相互依赖的对象提供一个接口，而不需要指定它们的具体类。
MediaPlayerFactoryMediaPlayerFactory 是一个用来创建 MediaPlayer 的工厂类。
12345678910sp&lt;MediaPlayerBase&gt; MediaPlayerFactory::createPlayer(        player_type playerType,        const sp&lt;MediaPlayerBase::Listener&gt; &amp;listener,        pid_t pid) &#123;    sp&lt;MediaPlayerBase&gt; p;...    p = ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/11/26/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/" title="无题">     <img class="post_bg" src="http://cdn.okclouder.cn/david-kovalenko-aQzh7VC-0H0-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/26/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-26T13:13:31.893Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></span></div><div class="content">Android 源码的模板方法模式模板方法模式介绍在面向对象开发过程中，通常会遇到这样的一个问题，我们知道一个算法所需的关键步骤，并确定了这些步骤的执行顺序，但是某些步骤的具体实现是未知的，或者说某些步骤的实现是会随着环境的变化而改变的。
例如，执行程序的流程大致如下：

检查代码的正确性
链接相关的类库
编译相关代码
执行程序

对于不同的程序设计语言，上述 4 个步骤都是不一样的，但是它们的执行流程都是固定的，这类问题的解决方案就是模板方法模式。
模板方法模式的定义定义一个操作中的算法的框架，而将一些步骤延迟到子类中，使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。
Android 源码中的模板方法模式在 Android 中，AsyncTask 是一个比较常用的类型，这个类就使用了模板方法模式。
AsyncTask 的整个执行过程其实是一个框架，具体的实现都需要子类来完成，而且它执行的算法框架是固定的，调用 execute 后会依次执行 onPreExecute、doInBackground、onPostExecute，当然也可以通过 onProgressUpdat ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/11/26/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/" title="无题">     <img class="post_bg" src="http://cdn.okclouder.cn/narinder-pal-jmeXz26F4ow-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/26/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-26T13:13:31.892Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></span></div><div class="content">Android 源码的工厂方法模式工厂方法模式介绍工厂方法模式（Factory Pattern），是创建型设计模式之一。工厂方法模式是一种结构简单的模式，比如 Android 中的 Activity 里的各个生命周期方法，以 onCreate 方法为例，它可以看作是一个工厂方法，我们在其中可以构造 View，通过 setContentView 返回给 framework 处理。
工厂方法模式的定义工厂方法模式定义一个用于创建对象的接口，让子类决定实例化哪个类。
Iterable以 List 和 Set 为例，List 和 Set 都继承于 Collection 接口，而 Collection 接口继承于 Iterable 接口，Iterable 接口很简单，有一个 iterator 方法。Java 1.8 定义了 forEach 和 spliterator 方法。
1234public interface Iterable&lt;T&gt; &#123;    Iterator&lt;T&gt; iterator();    ...&#125;

ArrayListArrayList  ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/11/26/Android%20%E6%BA%90%E7%A0%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93/" title="无题">     <img class="post_bg" src="http://cdn.okclouder.cn/j-lee-uySbEmywols-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/26/Android%20%E6%BA%90%E7%A0%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-26T13:13:31.892Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></span></div><div class="content">Android 源码设计模式总结设计模式可以按照创建型设计模式、结构型设计模式、行为型设计模式分为 3 类，共 23 种设计模式。
创建型设计模式创建型设计模式共有 5 种。
工厂方法 Factory Method
Android 源码的工厂方法模式
抽象工厂 Abstract Factory
Android 源码的抽象工厂模式
建造者 Builder
Android 源码的建造者模式
原型 Prototype
Android 源码的原型模式
单例 Singleton
Android 源码的单例模式
结构型设计模式结构型设计模式共有 7 种。
适配器 Adapter
Android 源码的适配器模式
桥接 Bridge
Android 源码的桥接模式
组合 Composite
Android 源码的组合模式
装饰者 Decorator
Android 源码的装饰者模式
外观 Facade
Android 源码的外观模式
享元 Flyweight
Android 源码的享元模式
代理 Proxy
Android 源码的代理模式
行为型设计模式行为型设计模式共有 11 种。
解释器 Int ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/11/26/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/" title="无题">     <img class="post_bg" src="http://cdn.okclouder.cn/narinder-pal-jmeXz26F4ow-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/26/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-26T13:13:31.891Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></span></div><div class="content">Android 源码的迭代器模式迭代器模式的介绍迭代器模式（Iterator Pattern） 又称为游标（Cursor）模式，是行为型设计模式之一。迭代器模式是一个比较古老的设计模式，其源于对容器的访问，比如 Java 中的 List、Map、数组等。
迭代器模式的定义提供一个方法顺序访问一个容器对象中的各个元素，而又不需要暴露该对象的内部表示。
Android 源码中的迭代器模式Android 中典型的迭代器模式例子是数据库查询使用 Cursor，当我们使用 SQLiteDatabase 的 query 方法查询数据时，会返回一个 Cursor 游标对象，该游标对象实质就是一个具体的迭代器，我们可以使用它遍历数据库查询所得到的结果集。
首先定义一个 SQLiteOpenHelper。
123456789101112131415161718public class DBHelper extends SQLiteOpenHelper &#123;    public DBHelper(Context context) &#123;        super(context, &quot ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/11/26/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/" title="无题">     <img class="post_bg" src="http://cdn.okclouder.cn/narinder-pal-jmeXz26F4ow-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/26/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-26T13:13:31.891Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></span></div><div class="content">Android 源码的适配器模式适配器模式介绍适配器模式在我们的开发中使用率极高，从代码中随处可见的 Adapter 就可以判断出来。从最早的 ListView、GridView 到现在最新的 RecyclerView 都需要使用 Adapter。
适配器模式的定义适配器模式把一个类的接口变换成客户端所期待的另一种接口，从而使原本因接口不匹配而无法在一起工作的两个类能够一起工作。
Android 源码中的适配器模式在开发过程中，ListView 的 Adapter 是我们最常见的类型之一。
ListView 中并没有 Adapter 相关的成员变量，其实 Adapter 在 ListView 的父类 AbsListView 中，AbsListView 是一个列表控件的抽象。
123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960public abstract class AbsListView extends Adapt ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/6/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/8/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/3806787?s=460&amp;u=ee280a9fc6c98bc591f30ffbf10360a9ac3822ff&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">caoshen</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">151</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/caoshen"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/caoshen" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">hello</div></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2020/11/26/%E4%B8%A4%E6%A3%B5%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E5%85%83%E7%B4%A0/" title="无题"><img src="http://cdn.okclouder.cn/marek-piwnicki-N4UBysRDmac-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/26/%E4%B8%A4%E6%A3%B5%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E5%85%83%E7%B4%A0/" title="无题">无题</a><time datetime="2020-11-26T13:13:31.929Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/26/%E4%BB%80%E4%B9%88%E6%98%AF%E4%BD%8E%E5%8A%9F%E8%80%97%E8%93%9D%E7%89%99%E6%8A%80%E6%9C%AF/" title="无题"><img src="http://cdn.okclouder.cn/matteo-cancellieri-i5pwOdrX9l0-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/26/%E4%BB%80%E4%B9%88%E6%98%AF%E4%BD%8E%E5%8A%9F%E8%80%97%E8%93%9D%E7%89%99%E6%8A%80%E6%9C%AF/" title="无题">无题</a><time datetime="2020-11-26T13:13:31.929Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/26/%E5%88%86%E6%95%B0%E5%88%B0%E5%B0%8F%E6%95%B0/" title="无题"><img src="http://cdn.okclouder.cn/jamie-davies-bCpAvL49GsU-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/26/%E5%88%86%E6%95%B0%E5%88%B0%E5%B0%8F%E6%95%B0/" title="无题">无题</a><time datetime="2020-11-26T13:13:31.929Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/26/%E8%BF%9E%E7%BB%AD%E6%AD%A3%E6%95%B4%E6%95%B0%E4%B9%8B%E5%92%8C/" title="无题"><img src="http://cdn.okclouder.cn/david-kovalenko-aQzh7VC-0H0-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/26/%E8%BF%9E%E7%BB%AD%E6%AD%A3%E6%95%B4%E6%95%B0%E4%B9%8B%E5%92%8C/" title="无题">无题</a><time datetime="2020-11-26T13:13:31.929Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/26/%E5%92%8C%E4%B8%BA%E9%9B%B6%E7%9A%84N%E4%B8%AA%E5%94%AF%E4%B8%80%E6%95%B4%E6%95%B0/" title="无题"><img src="http://cdn.okclouder.cn/marek-piwnicki-N4UBysRDmac-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/26/%E5%92%8C%E4%B8%BA%E9%9B%B6%E7%9A%84N%E4%B8%AA%E5%94%AF%E4%B8%80%E6%95%B4%E6%95%B0/" title="无题">无题</a><time datetime="2020-11-26T13:13:31.928Z" title="发表于 2020-11-26 21:13:31">2020-11-26</time></div></div></div></div></div><div class="card-widget card-categories"><div class="card-content"><div class="item-headline"><i class="fas fa-folder-open"></i><span>分类</span></div><ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/"><span class="card-category-list-name">Android</span><span class="card-category-list-count">9</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kotlin/"><span class="card-category-list-name">Kotlin</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%93%9D%E7%89%99/"><span class="card-category-list-name">蓝牙</span><span class="card-category-list-count">6</span></a></li>
            
            </ul></div></div><div class="card-widget card-tags"><div class="card-content"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/BLE%E5%B9%BF%E6%92%AD/" style="font-size: 1.1em; color: #999">BLE广播</a> <a href="/tags/Gradle/" style="font-size: 1.4em; color: #99a5b6">Gradle</a> <a href="/tags/IPC/" style="font-size: 1.1em; color: #999">IPC</a> <a href="/tags/Kotlin/" style="font-size: 1.2em; color: #999da3">Kotlin</a> <a href="/tags/Kotlin%E6%A0%87%E5%87%86%E5%BA%93/" style="font-size: 1.1em; color: #999">Kotlin标准库</a> <a href="/tags/Proguard/" style="font-size: 1.1em; color: #999">Proguard</a> <a href="/tags/View/" style="font-size: 1.1em; color: #999">View</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.5em; color: #99a9bf">算法</a> <a href="/tags/%E8%93%9D%E7%89%99/" style="font-size: 1.3em; color: #99a1ac">蓝牙</a> <a href="/tags/%E8%93%9D%E7%89%99Profile/" style="font-size: 1.1em; color: #999">蓝牙Profile</a></div></div></div><div class="card-widget card-archives"><div class="card-content"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/11/"><span class="card-archive-list-date">十一月 2020</span><span class="card-archive-list-count">103</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/10/"><span class="card-archive-list-date">十月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/09/"><span class="card-archive-list-date">九月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/08/"><span class="card-archive-list-date">八月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/06/"><span class="card-archive-list-date">六月 2020</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/05/"><span class="card-archive-list-date">五月 2020</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/04/"><span class="card-archive-list-date">四月 2020</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/03/"><span class="card-archive-list-date">三月 2020</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item more is-center"><a class="card-archive-list-link-more" href="/archives/">
              <span>查看更多</span><i class="fas fa-angle-right"  ></i></a></li></ul></div></div><div class="card-widget card-webinfo"><div class="card-content"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">151</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2020-11-26T13:56:10.443Z"></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 By caoshen</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="icp"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><span>鄂ICP备18020323号</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>