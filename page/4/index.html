<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>caoshen - caoshen 的博客</title><meta name="author" content="caoshen"><meta name="copyright" content="caoshen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta property="og:type" content="website">
<meta property="og:title" content="caoshen">
<meta property="og:url" content="https://www.okclouder.cn/page/4/index.html">
<meta property="og:site_name" content="caoshen">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://avatars2.githubusercontent.com/u/3806787?s=460&u=ee280a9fc6c98bc591f30ffbf10360a9ac3822ff&v=4">
<meta property="article:author" content="caoshen">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://avatars2.githubusercontent.com/u/3806787?s=460&u=ee280a9fc6c98bc591f30ffbf10360a9ac3822ff&v=4"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.okclouder.cn/page/4/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2020-11-27 22:59:26'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="caoshen" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/3806787?s=460&amp;u=ee280a9fc6c98bc591f30ffbf10360a9ac3822ff&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">151</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(https://pic1.zhimg.com/80/v2-53cf7b4f3782749070a4207dd4d4888b_1440w.jpeg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">caoshen</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="site-info"><h1 id="site-title">caoshen</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/caoshen" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/11/27/Retrofit%20%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/" title="无题">     <img class="post_bg" src="https://pic1.zhimg.com/80/v2-ae3e138bac66bc9e3081c035d27dcfd9_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/27/Retrofit%20%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-27T00:56:17.789Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></span></div><div class="content">Retrofit 基本用法Retrofit 介绍Retrofit 是 Square 开发的 Android 网络请求框架，它是基于 OkHttp 实现的。与其他网络框架不同，它使用运行时注解提供功能。
Retrofit 依赖在 build.gradle 配置依赖如下：
12implementation &#39;com.squareup.retrofit2:retrofit:2.6.1&#39;implementation &#39;com.squareup.retrofit2:converter-gson:2.6.1&#39;

第一行配置了 retrofit 依赖。第二行配置了 gson 转换依赖。
Retrofit 注解分类Retrofit 有 3 类注解：

请求方法注解；
标记类注解；
参数类注解。

Http 请求方法注解有 8 种：GET、POST、PUT、DELETE、HEAD、PATCH、OPTIONS、HTTP。
标记类注解有 3 种：FormUrlEncoded、Multipart、Streaming。
参数类注解：Header、Headers、Body、Path ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/11/27/Android%20%E4%B8%AD%E7%9A%84%20IPC%20%E6%96%B9%E5%BC%8F/" title="无题">     <img class="post_bg" src="https://pic2.zhimg.com/80/v2-de84195207d783e0ed3bfb99f151f23e_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/27/Android%20%E4%B8%AD%E7%9A%84%20IPC%20%E6%96%B9%E5%BC%8F/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-27T00:56:17.788Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></span></div><div class="content">Android 中的 IPC 方式Android 中跨进程通信的方式有 intent 传入 bundle，共享文件，Messenger，AIDL，ContentProvider，Socket。
Bundle四大组件中的三大组件（Activity\Service\BroadcastReceiver）都是支持在 intent 中传递 Bundle 数据的。由于 Bundle　实现了 Parcelable 接口，所以它可以方便地在不同的进程间传输。传输的数据必须能够被序列化，比如基本类型，实现了 Parcelable 接口的对象，实现了 Serializable 接口的对象以及一些 Android 支持的特殊类型。
文件共享共享文件也是一种不错的进程间通信方式，两个进程通过读写同一个文件来交换数据。比如 A 进程把数据写入文件，B 进程通过读取这个文件来获取数据。由于 Android 基于 Linux，使得并发读写文件可以没有限制地进行，甚至两个线程同时对同一个文件进行写操作都是允许的。
通过文件共享的方式是有局限性的。如果并发读写，读出来的内容可能不是最新的。如果并发写，可能内容就错乱了。 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/11/27/CNAME%20%E9%85%8D%E7%BD%AE/" title="无题">     <img class="post_bg" src="https://pic1.zhimg.com/80/v2-ae3e138bac66bc9e3081c035d27dcfd9_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/27/CNAME%20%E9%85%8D%E7%BD%AE/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-27T00:56:17.788Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></span></div><div class="content">CNAME 配置CNAME作用CNAME 即指别名记录，也被称为规范名字。这种记录允许将多个名字映射到同一台计算机。 当需要将域名指向另一个域名，再由另一个域名提供 ip地址，就需要添加 CNAME 记录。
CNAME会解析到另一个域名，之后再对另一个域名继续解析，直到解析出节点。
域名网站添加域名解析以腾讯云为例，找到“云解析”，在“域名解析列表”添加CNAME记录。



主机记录
记录类型
线路类型
记录值
TTL（秒）



xxx
CNAME
默认
xxx.github.io.
600


等待解析生效后，xxx.yourdomain.com 就能解析到 xxx.github.io
注意记录值最后需要加上一个点
在 github pages 新建 CNAME 文件新增 CNAME 文件
1xxx.yourdomain.com

Hexo 博客添加 CNAMEHexo 博客添加 CNAME 时，需要将 CNAME 文件放入 source 目录中。hexo g -d 部署后，CNAME 文件会被自动放入网站的根目录下。
</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/11/27/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/" title="无题">     <img class="post_bg" src="https://pic2.zhimg.com/80/v2-de84195207d783e0ed3bfb99f151f23e_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/27/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-27T00:56:17.787Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></span></div><div class="content">Android 源码的桥接模式桥接模式介绍桥接模式（Bridge Pattern）也称为桥梁模式，是结构型设计模式之一。桥接模式承担着连接两边的作用。
桥接模式的定义将抽象部分与实现部分分离，使它们都可以独立地进行变化。
Android 源码中的桥接模式实现Framework 内部的源码实现中，比较典型的桥接模式应用是 Window 与 WindowManager 之间的关系。
在 fwk 中 Window 和 PhoneWindow 构成窗口的抽象部分，其中 Window 类为该抽象部分的抽象接口，PhoneWindow 为抽象部分具体的实现及扩展。而 WindowManager 则为实现部分的基类，WindowManagerImpl 为实现部分具体的逻辑实现，其使用 WindowManagerGlobal 通过 IWindowManager 接口与 WindowManagerService （也就是 WMS）进行交互，并由 WMS 完成具体的窗口管理工作。
123456789101112131415161718192021222324public abstract class Wi ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/11/27/ContentProvider%20%E7%9A%84%20query%20%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/" title="无题">     <img class="post_bg" src="https://pic2.zhimg.com/80/v2-de84195207d783e0ed3bfb99f151f23e_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/27/ContentProvider%20%E7%9A%84%20query%20%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-27T00:56:17.786Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></span></div><div class="content">ContentProvider 的 query 流程分析ContentProvider 将底层的数据结构（比如数据库、文件）封装并且提供增删改查的接口，提供给本应用或者外部的应用调用。
ContentResolver 的 query 方法ContentProvider 的 query 操作是通过 ContentResolver 的 query 调用的，而不是直接调用 ContentProvider 的 query 方法，ContentProvider 的 query 方法类似于回调方法。
ContentResolver 的 query 方法一般调用方式如下：
context.getContentResolver().query(getUri(), null, null, null, null);
Context 是一个抽象类，它的具体实现都在 ContextImpl 类中。
ContextImpl 的 getContentResolver 方法如下：
123public ContentResolver getContentResolver() &#123;    return mCon ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/11/27/Java%20%E9%87%8D%E5%85%A5%E9%94%81%E4%B8%8E%E6%9D%A1%E4%BB%B6%E5%AF%B9%E8%B1%A1/" title="无题">     <img class="post_bg" src="https://pic1.zhimg.com/80/v2-53cf7b4f3782749070a4207dd4d4888b_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/27/Java%20%E9%87%8D%E5%85%A5%E9%94%81%E4%B8%8E%E6%9D%A1%E4%BB%B6%E5%AF%B9%E8%B1%A1/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-27T00:56:17.786Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></span></div><div class="content">Java 重入锁与条件对象重入锁 ReentrantLock 是 Java 1.5 引入的，重入的意思是指可以重复获取锁，即拿到锁的对象可以再次拿一次锁，而不必先释放上一个锁。
ReentrantLock 实现了 Lock 接口。用 ReentrantLock 保护代码块的结构如下：
123456789private void dosomethingLock() &#123;    Lock lock = new ReentrantLock();    lock.lock();    try &#123;        dosomething();    &#125; finally &#123;        lock.unlock();    &#125;&#125;

这一结构保证了任何时候只有一个线程进入临界区，临界区就是在同一个时刻只有一个任务可以访问的代码区。unlock 操作放在 finally 可以保证锁一定可以被释放。
如果进入临界区时，发现在某一个条件满足之后才能执行，这时可以使用一个条件对象 Condition 来管理那些已经获得了锁但是却不能做有用工作的线程。
 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/11/27/%E6%9C%80%E5%A4%A7%E9%97%B4%E8%B7%9D/" title="无题">     <img class="post_bg" src="https://pic2.zhimg.com/80/v2-de84195207d783e0ed3bfb99f151f23e_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/27/%E6%9C%80%E5%A4%A7%E9%97%B4%E8%B7%9D/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-27T00:56:17.785Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></span></div><div class="content">最大间距给定一个无序的数组，找出数组在排序之后，相邻元素之间最大的差值。
如果数组元素个数小于 2，则返回 0。
示例 1:
123输入: [3,6,9,1]输出: 3解释: 排序后的数组是 [1,3,6,9], 其中相邻元素 (3,6) 和 (6,9) 之间都存在最大差值 3。

示例 2:
123输入: [10]输出: 0解释: 数组元素个数小于 2，因此返回 0。

说明:
你可以假设数组中所有元素都是非负整数，且数值在 32 位有符号整数范围内。请尝试在线性时间复杂度和空间复杂度的条件下解决此问题。
来源：力扣（LeetCode）链接：https://leetcode-cn.com/problems/maximum-gap著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。
思路首先按照题意，用排序加上遍历的方法解决问题。虽然不能满足线性时间复杂度和空间复杂度的条件。
这种解法如下：
12345678910111213141516class Solution &#123;    public int maximumGap(int[] nums) &#123;   ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/11/27/%E5%9C%A8%20build.gradle.kts%20%E6%B7%BB%E5%8A%A0%20maven%20%E4%BB%93%E5%BA%93/" title="无题">     <img class="post_bg" src="https://pic4.zhimg.com/80/v2-905b30ef749b15963046e9bd1d41f195_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/27/%E5%9C%A8%20build.gradle.kts%20%E6%B7%BB%E5%8A%A0%20maven%20%E4%BB%93%E5%BA%93/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-27T00:56:17.784Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></span></div><div class="content">在 build.gradle.kts 添加 maven 仓库使用 kotlin script DSL 配置 build.gradle.kts 时，添加 maven 仓库的方式如下：
123456repositories &#123;    maven &#123;        setUrl(&quot;http://maven.aliyun.com/nexus/content/groups/public/&quot;)    &#125;    mavenCentral()&#125;

它等价于以下 gradle 配置：
1234repositories &#123;    maven &#123;url &#x27;http://maven.aliyun.com/nexus/content/groups/public/&#x27;&#125;    mavenCentral()&#125;

参考资料如何使用kotlinscript DSL（build.gradle.kts）通过url添加maven存储库？
Provide maven(url: String, name: Str ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/11/27/%E8%87%AA%E5%AE%9A%E4%B9%89%20ActivityNotifier%20%E8%A7%82%E5%AF%9F%E6%89%80%E6%9C%89%20Activity%20%E5%88%87%E6%8D%A2/" title="无题">     <img class="post_bg" src="https://pic1.zhimg.com/80/v2-1fb9faa1ea61d40bed117604673486ae_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/27/%E8%87%AA%E5%AE%9A%E4%B9%89%20ActivityNotifier%20%E8%A7%82%E5%AF%9F%E6%89%80%E6%9C%89%20Activity%20%E5%88%87%E6%8D%A2/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-27T00:56:17.784Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></span></div><div class="content">自定义 ActivityNotifier 观察所有 Activity 切换我们知道，使用 Application 注册 ActivityLifecycleCallbacks 可以观察到本应用的所有 Activity 的生命周期切换。那么有没有一种方法可以观察到手机上所有应用的 Activity 的生命周期切换？
因为所有 Activity 的生命周期回调都会经过 ActivityManagerService(AMS) 管理，最后回调到应用的 ActivityThread。所以如果想要观察手机上所有应用的 Activity 生命周期回调，最好的办法就是在 AMS 中添加自定义的接口来实现。
ActivityTaskManagerServiceAndroid 10 版本（Q 版本）中新增了一个 ActivityTaskManagerService（ATMS） 类，它的作用是承担 AMS 的部分功能。由于 AMS 过于庞大，所以将部分功能剥离给 ATMS 来处理。
ActivityTaskManagerService 中有一些回调方法，例如 activityResumed 方法，所有 Act ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/11/27/Android%20%E6%BA%90%E7%A0%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93/" title="无题">     <img class="post_bg" src="https://pic1.zhimg.com/80/v2-ae3e138bac66bc9e3081c035d27dcfd9_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/11/27/Android%20%E6%BA%90%E7%A0%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-11-27T00:56:17.783Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></span></div><div class="content">Android 源码设计模式总结设计模式可以按照创建型设计模式、结构型设计模式、行为型设计模式分为 3 类，共 23 种设计模式。
创建型设计模式创建型设计模式共有 5 种。
工厂方法 Factory Method
Android 源码的工厂方法模式
抽象工厂 Abstract Factory
Android 源码的抽象工厂模式
建造者 Builder
Android 源码的建造者模式
原型 Prototype
Android 源码的原型模式
单例 Singleton
Android 源码的单例模式
结构型设计模式结构型设计模式共有 7 种。
适配器 Adapter
Android 源码的适配器模式
桥接 Bridge
Android 源码的桥接模式
组合 Composite
Android 源码的组合模式
装饰者 Decorator
Android 源码的装饰者模式
外观 Facade
Android 源码的外观模式
享元 Flyweight
Android 源码的享元模式
代理 Proxy
Android 源码的代理模式
行为型设计模式行为型设计模式共有 11 种。
解释器 Int ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/3/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/5/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/3806787?s=460&amp;u=ee280a9fc6c98bc591f30ffbf10360a9ac3822ff&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">caoshen</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">151</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/caoshen"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/caoshen" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">hello</div></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2020/11/27/%E5%AF%BB%E6%89%BE%E5%B3%B0%E5%80%BC/" title="无题"><img src="https://pic4.zhimg.com/80/v2-905b30ef749b15963046e9bd1d41f195_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/27/%E5%AF%BB%E6%89%BE%E5%B3%B0%E5%80%BC/" title="无题">无题</a><time datetime="2020-11-27T00:56:17.814Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/27/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/" title="无题"><img src="https://pic1.zhimg.com/80/v2-53cf7b4f3782749070a4207dd4d4888b_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/27/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/" title="无题">无题</a><time datetime="2020-11-27T00:56:17.812Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/27/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/" title="无题"><img src="https://pic1.zhimg.com/80/v2-1fb9faa1ea61d40bed117604673486ae_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/27/Android%20%E6%BA%90%E7%A0%81%E7%9A%84%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/" title="无题">无题</a><time datetime="2020-11-27T00:56:17.811Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/27/Java%20%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/" title="无题"><img src="https://pic1.zhimg.com/80/v2-1fb9faa1ea61d40bed117604673486ae_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/27/Java%20%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/" title="无题">无题</a><time datetime="2020-11-27T00:56:17.811Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/27/Android%20RxJava%20%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/" title="无题"><img src="https://pic1.zhimg.com/80/v2-ae3e138bac66bc9e3081c035d27dcfd9_1440w.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2020/11/27/Android%20RxJava%20%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/" title="无题">无题</a><time datetime="2020-11-27T00:56:17.810Z" title="发表于 2020-11-27 08:56:17">2020-11-27</time></div></div></div></div></div><div class="card-widget card-categories"><div class="card-content"><div class="item-headline"><i class="fas fa-folder-open"></i><span>分类</span></div><ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/"><span class="card-category-list-name">Android</span><span class="card-category-list-count">9</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kotlin/"><span class="card-category-list-name">Kotlin</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%AE%97%E6%B3%95/"><span class="card-category-list-name">算法</span><span class="card-category-list-count">24</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%93%9D%E7%89%99/"><span class="card-category-list-name">蓝牙</span><span class="card-category-list-count">6</span></a></li>
            
            </ul></div></div><div class="card-widget card-tags"><div class="card-content"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/BFS/" style="font-size: 1.1em; color: #999">BFS</a> <a href="/tags/BLE%E5%B9%BF%E6%92%AD/" style="font-size: 1.1em; color: #999">BLE广播</a> <a href="/tags/Gradle/" style="font-size: 1.4em; color: #99a5b6">Gradle</a> <a href="/tags/IPC/" style="font-size: 1.1em; color: #999">IPC</a> <a href="/tags/Kotlin/" style="font-size: 1.2em; color: #999da3">Kotlin</a> <a href="/tags/Kotlin%E6%A0%87%E5%87%86%E5%BA%93/" style="font-size: 1.1em; color: #999">Kotlin标准库</a> <a href="/tags/Proguard/" style="font-size: 1.1em; color: #999">Proguard</a> <a href="/tags/View/" style="font-size: 1.1em; color: #999">View</a> <a href="/tags/%E5%9B%BE/" style="font-size: 1.1em; color: #999">图</a> <a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size: 1.1em; color: #999">数组</a> <a href="/tags/%E6%A0%91/" style="font-size: 1.3em; color: #99a1ac">树</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.5em; color: #99a9bf">算法</a> <a href="/tags/%E8%93%9D%E7%89%99/" style="font-size: 1.3em; color: #99a1ac">蓝牙</a> <a href="/tags/%E8%93%9D%E7%89%99Profile/" style="font-size: 1.1em; color: #999">蓝牙Profile</a> <a href="/tags/%E9%95%9C%E5%83%8F/" style="font-size: 1.1em; color: #999">镜像</a></div></div></div><div class="card-widget card-archives"><div class="card-content"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/11/"><span class="card-archive-list-date">十一月 2020</span><span class="card-archive-list-count">97</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/10/"><span class="card-archive-list-date">十月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/09/"><span class="card-archive-list-date">九月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/08/"><span class="card-archive-list-date">八月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/06/"><span class="card-archive-list-date">六月 2020</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/05/"><span class="card-archive-list-date">五月 2020</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/04/"><span class="card-archive-list-date">四月 2020</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/03/"><span class="card-archive-list-date">三月 2020</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item more is-center"><a class="card-archive-list-link-more" href="/archives/">
              <span>查看更多</span><i class="fas fa-angle-right"  ></i></a></li></ul></div></div><div class="card-widget card-webinfo"><div class="card-content"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">151</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2020-11-27T14:59:25.927Z"></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 By caoshen</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="icp"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><span>鄂ICP备18020323号</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>